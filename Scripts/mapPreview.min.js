function getURLParameter(a){return decodeURIComponent((new RegExp("[?|&]"+a+"=([^&;]+?)(&|#|;|$)").exec(location.search)||[,""])[1].replace(/\+/g,"%20"))||null}var map,extentPolygon;require(["esri/map","esri/layers/ArcGISDynamicMapServiceLayer","esri/layers/FeatureLayer","esri/tasks/GeometryService","esri/geometry/Extent","esri/request","dojo/domReady!"],function(a,b,c,d,e){esriConfig.defaults.geometryService=new d("http://sampleserver6.arcgisonline.com/arcgis/rest/services/Utilities/Geometry/GeometryServer");var f=new e(JSON.parse(getURLParameter("extent")));map=new a("map",{basemap:"topo",extent:f.expand(1.5)});var g,h=getURLParameter("serviceType"),i=getURLParameter("serviceUrl");switch(h){case"MapServer":g=new b(i),map.addLayer(g);break;case"FeatureServer":var g=new c(i+"/0",{mode:c.MODE_AUTO});map.addLayer(g)}});
!function(n){"use strict";var f="<img src='/bootstrap-tree/img/ajax-loader.gif' class='indicator' /> Loading ...",t=function(t,i){this.$element=n(t),this.$tree=this.$element.closest(".tree"),this.parentage=r(this.$element),this.options=n.extend({},n.fn.tree.defaults,i),this.options.parent&&(this.$parent=n(this.options.parent)),this.options.toggle&&this.toggle()};t.prototype={constructor:t,toggle:function(){var r,t,u,i=this.$element.hasClass("in"),f=i?"closebranch":"openbranch";this.$parent[i?"addClass":"removeClass"]("closed"),this.$element[i?"removeClass":"addClass"]("in"),this.options.href&&this._load(),t=this.node(),r=n.Event(f,{node:t}),u=n.Event("nodeselect",{node:t}),this.$parent.trigger(r).trigger(u)},_load:function(){var t=n.extend({},this.options),i=this.$element,u=n(this),r=this.options;delete t.parent,delete t.href,delete t.callback,n.post(r.href,t,function(t,f,e){var o,s="html",h;if(r.callback)h=window[r.callback].apply(i,[t,f,e]),o=h.doc||t,s=h.type||s;else{try{o=n.parseJSON(t),s="json"}catch(c){o=t}if(s!=="json")try{o=n.parseXML(t),s="xml"}catch(c){o=t}}switch(s){case"html":i.html(o);break;default:u[0]._buildOutput(o,s,i)}},"html")},_buildOutput:function(n,t,i){var r=this._buildNodes(n,t);i.empty().append(this._createNodes(r))},_createNodes:function(t){var i=[],r=n(this);return n.each(t,function(t,u){var h=n("<li>"),c=u.leaf?"leaf":"branch",f={},e=n("<a>"),o,s;f.role=c,u.leaf||(o=n("<ul>").addClass("branch"),f.class="tree-toggle closed",f["data-toggle"]="branch"),u.value&&(f["data-value"]=u.value),u.id&&(f["data-itemid"]=u.id);for(s in u)s.indexOf("data-")!==-1&&(f[s]=u[s]);f.href=u.href?u.href:"#",u.leaf&&f.href==="#"&&(e=n("<span>"),delete f.href),e.attr(f),u.cls&&e.addClass(u.cls),!u.leaf&&u.expanded&&u.children.length&&(e.removeClass("closed"),o.addClass("in")),e.html(u.text),h.append(e),!u.leaf&&u.children&&u.children.length&&(o.append(r[0]._createNodes(u.children)),h.append(o)),i.push(h)}),i},_buildNodes:function(t,i){var r=[],u=this.$element;return i==="json"?r=this._parseJsonNodes(t):i==="xml"&&(r=this._parseXmlNodes(n(t).find("nodes").children())),r},_parseJsonNodes:function(t){var r=[],f=n(this);return n.each(t,function(t,e){var h={},s,o;for(s in e)o=s!=="children"?e[s]:f[0]._parseJsonNodes(e.children),n.isArray(o)||(o=n.trim(o)),o.length&&(h[s]=n.inArray(s,["leaf","expanded","checkable","checked"])>-1?u(o):o);r.push(new i(h))}),r},_parseXmlNodes:function(t){var r=[],f=n(this),e=["leaf","expanded","checkable","checked"];return n.each(t,function(t,o){var s={},h=n(o);n.each(h.children(),function(t,i){var o=n(i),h=o[0].nodeName,r=h!=="children"?o.text():f[0]._parseXmlNodes(o.children("node"));n.isArray(r)||(r=n.trim(r)),r.length&&(s[h]=n.inArray(h,e)>-1?u(r):r)}),r.push(new i(s))}),r},getparentage:function(){return this.parentage},node:function(t){t=t||n(this);var i=n.extend(!0,{},t[0]===n(this)[0]?n(this.$parent).data():t.data());return i.branch=this.$element,i.parentage=this.parentage,i.el=t[0]===n(this)[0]?this.$parent:t,delete i.parent,i}};var i=function(t){n.extend(!0,this,{text:undefined,leaf:!1,value:undefined,expanded:!1,cls:undefined,id:undefined,href:undefined,checkable:!1,checked:!1,children:[]},t)},e=function(n){return n.closest("ul.branch").prev(".tree-toggle")},r=function(n){var i=[],t;return t=e(n),t.length&&(i=r(t),i.push(t.attr("data-value")||t.text())),i},u=function(t){if(t=n.trim(t),typeof t=="undefined"||t===null)return!1;if(typeof t!="string"||isNaN(t)||(t=parseFloat(t)),typeof t=="string")switch(t.toLowerCase()){case"true":case"yes":return!0;case"false":case"no":return!1}return Boolean(t)};n.fn.tree=function(i){return this.each(function(){var u=n(this),r=u.data("tree"),f=typeof i=="object"&&i;r||u.data("tree",r=new t(this,f)),typeof i=="string"&&r[i]()})},n.fn.tree.defaults={toggle:!0},n.fn.tree.Constructor=t,n(function(){n("body").on("click.tree.data-api","[data-toggle=branch]",function(t){t.preventDefault();var i=n(this),r=i.next(".branch"),u=i.attr("href"),e=n(r).data("tree")?"toggle":i.data();return u.replace(/.*(?=#[^\s]+$)/,""),r.length||(r=n("<ul>").addClass("branch").append("<li>"+f+"<\/li>").insertAfter(i)),e.parent=i,e.href=u!=="#"?u:undefined,n(r).tree(e),!1});n("body").on("click.tree.data-api","[role=leaf]",function(t){var i=n(this),r=i.closest(".branch");if(!n(r).data("tree")){var e=n(r),u=e.prev("[data-toggle=branch]"),o=u.data(),f=u.attr("href");f.replace(/.*(?=#[^\s]+$)/,""),e.tree(n.extend({},o,{toggle:!1,parent:u,href:f!=="#"?f:undefined}))}t=n.Event("nodeselect",{node:n(r).data("tree").node(i)}),i.trigger(t)})})}(window.jQuery);
//@ sourceMappingURL=bootstrap-tree.min.js.map
function btnGetServerInfo_Click(n){if(n==="")$("#alertbox").append('<div class="alert"><button type="button" class="close" data-dismiss="alert">&times;<\/button><strong>Oops!<\/strong> Please enter a Server URL.<\/div>');else if(n.endsWith("/")||(n=n+"/"),!0){var i=n.split("/"),r=i[2],t=r.split(".").join(""),u='<li><a href="#" role="branch" class="tree-toggle closed" data-toggle="branch" data-value="'+t+'" id="'+t+'" data-metadataServiceUrl="'+n+'">'+t+'<\/a><ul id="'+t+'_childNodes" class="branch"><\/ul><\/li>';$("#servicesTree").empty(),$("#servicesTree").append(u),listFolderContent(n,t+"_childNodes","infoPanel")}else listFolderContent(n,"servicesTree","infoPanel")}function listFolderContent(n,t,i){var r=n+"?f=json&callback=?";$.getJSON(r,function(r){var u="";r.folders.length>0&&r.folders.forEach(function(t){var i='<li><a href="#" role="branch" class="tree-toggle closed" data-toggle="branch" data-value="'+t+'" id="'+t+'" data-metadataServiceUrl="'+n+t+'/">'+t+'<\/a><ul id="'+t+'_childNodes" class="branch"><\/ul><\/li>';u=u+i}),$("#"+t).empty(),$("#"+t).append(u),r.services.length>0&&r.services.forEach(function(i){var r=i.name.substr(i.name.lastIndexOf("/")+1),u='<li><a href="#" role="leaf" data-serviceUrl="'+n+r+"/"+i.type+'" id="'+r+"_"+i.type+'" data-serviceType="'+i.type+'" data-serviceName="'+r+'">'+r+" ("+i.type+")<\/a><\/li>";$("#"+t).append(u)}),displayFolderInfo(n,r,i)})}function displayFolderInfo(n,t,i){$("#"+i).empty(),$("#"+i).append("<p>ArcGIS Server version: "+t.currentVersion+"<\/p>"),t.folders.length>0&&($("#"+i).append("<h2>Folders:<\/h2>"),t.folders.forEach(function(t){$("#"+i).append('<p><a href="'+n+t+'/" target="_blank">'+t+"<\/a><\/p>")})),t.services.length>0&&($("#"+i).append("<h2>Services:<\/h2>"),t.services.forEach(function(t){var r=t.name.substr(t.name.lastIndexOf("/")+1);$("#"+i).append('<p><a href="'+n+r+"/"+t.type+'/" target="_blank">'+t.name+"<\/a> ("+t.type+")<\/p>")}))}function listServiceInfo(n,t,i,r){var u=n+"?f=json&callback=?";$.getJSON(u,function(u){var f,e;isDebug&&(f="",f+='<span class="label label-info">Service Full Details: <\/span>',$.each(u,function(n,t){f+="<p>"+n+": "+t+"<\/p>"}),f+="<hr/>",f+='<span class="label label-info">JSON String: <\/span><br/>',f+=JSON.stringify(u),f='<hr/><span class="label">Last JSON Response:<\/span><br/>'+f+'<hr/><span class="label">Event Sequence:<\/span>',$("#jsonDiv").empty(),$("#jsonDiv").append(f)),$("#"+r).empty(),e="",e+='<div class="text-right"><p><h2>'+t+"<\/h2>",e+="<i>"+i+"<\/i>  ",e+='<a href="'+n+'" target="_blank"><img src="images/OpenLinkInNewTabSmall.png" alt="View service in Services Directory" /><\/a><\/p><\/div>',e+="<hr />",e+="<p><b>Service Description: <\/b>",e+=u.serviceDescription!==""?u.serviceDescription+"<\/p>":"N/A <\/p>",$("#"+r).append(e);switch(i){case"GPServer":listGPServerServiceInfo(u,r);break;case"MapServer":listMapServerServiceInfo(u,r);break;case"ImageServer":listImageServerServiceInfo(u,r);break;case"FeatureServer":listFeatureServerServiceInfo(u,r);break;case"NAServer":listNAServerServiceInfo(u,r);break;case"MobileServer":listMobileServerServiceInfo(u,r)}})}function listMobileServerServiceInfo(n,t){var i="";i+=writeStringMetadataEntryToHtml("Map Name",n.mapName),i+=writeStringMetadataEntryToHtml("Description",n.description),i+=writeLayersObjectMetadataEntryToHtml("Layers",n.layers),i+=writeSpatialReferenceObjectMetadataEntryToHtml("spatialReference",n.spatialReference),i+=writeExtentObjectMetadataEntryToHtml("Initial Extent",n.initialExtent),i+=writeExtentObjectMetadataEntryToHtml("Full Extent",n.fullExtent),i+=writeUnitsObjectMetadataEntryToHtml("Units",n.units),$("#"+t).append(i)}function listGPServerServiceInfo(n,t){var i="";i+=writeStringMetadataEntryToHtml("Execution Type",n.executionType),i+=writeStringMetadataEntryToHtml("Result Map Server Name",n.resultMapServerName),i+=writeStringMetadataEntryToHtml("Maximum Records",n.maximumRecords),$("#"+t).append(i)}function listMapServerServiceInfo(n,t){var i="";i+=writeStringMetadataEntryToHtml("Map Name",n.mapName),i+=writeStringMetadataEntryToHtml("Description",n.description),i+=writeStringMetadataEntryToHtml("Copyright Text",n.copyrightText),i+=writeBooleanMetadataEntryToHtml("Supports Dynamic Layers",n.supportsDynamicLayers),i+=writeLayersObjectMetadataEntryToHtml("Layers",n.layers),i+=writeTablesObjectMetadataEntryToHtml("Tables",n.tables),i+=writeSpatialReferenceObjectMetadataEntryToHtml("Spatial Reference",n.spatialReference),i+=writeBooleanMetadataEntryToHtml("Single Fused Map Cache",n.singleFusedMapCache),i+=writeExtentObjectMetadataEntryToHtml("Initial Extent",n.initialExtent),i+=writeExtentObjectMetadataEntryToHtml("Full Extent",n.fullExtent),i+=writeNumberMetadataEntryToHtml("Minimum Scale",n.minScale),i+=writeNumberMetadataEntryToHtml("Maximum Scale",n.maxScale),i+=writeUnitsObjectMetadataEntryToHtml("Units",n.units),i+=writeCommaSeparatedListMetadataEntryToHtml("Supported Image Format Types",n.supportedImageFormatTypes),i+=writeDocumentInfoObjectMetadataEntryToHtml("Document Info",n.documentInfo),i+=writeCommaSeparatedListMetadataEntryToHtml("Capabilities",n.capabilities),i+=writeCommaSeparatedListMetadataEntryToHtml("Supported Query Formats",n.supportedQueryFormats),i+=writeNumberMetadataEntryToHtml("Maximum Record Count",n.maxRecordCount),i+=writeNumberMetadataEntryToHtml("Maximum Image Height",n.maxImageHeight),i+=writeNumberMetadataEntryToHtml("Maximum Image Width",n.maxImageWidth),$("#"+t).append(i)}function listImageServerServiceInfo(n,t){var i="";i+=writeStringMetadataEntryToHtml("Name",n.name),i+=writeStringMetadataEntryToHtml("Description",n.description),i+=writeExtentObjectMetadataEntryToHtml("Extent",n.extent),i+=writeExtentObjectMetadataEntryToHtml("Initial Extent",n.initialExtent),i+=writeExtentObjectMetadataEntryToHtml("Full Extent",n.fullExtent),i+=writeNumberMetadataEntryToHtml("Pixel Size X",n.pixelSizeX),i+=writeNumberMetadataEntryToHtml("Pixel Size Y",n.pixelSizeY),i+=writeNumberMetadataEntryToHtml("Band Count",n.bandCount),i+=writeStringMetadataEntryToHtml("Pixel Type",n.pixelType),i+=writeNumberMetadataEntryToHtml("Minimum Pixel Size",n.minPixelSize),i+=writeNumberMetadataEntryToHtml("Maximum Pixel Size",n.maxPixelSize),i+=writeStringMetadataEntryToHtml("Copyright Text",n.copyrightText),i+=writeServiceDataTypeObjectMetadataEntryToHtml("Service Data Type",n.serviceDataType),i+=writeNumberMetadataEntryToHtml("Minimum Value",n.minValues),i+=writeNumberMetadataEntryToHtml("Maximum Value",n.maxValues),i+=writeNumberMetadataEntryToHtml("Mean Value",n.meanValues),i+=writeNumberMetadataEntryToHtml("Standard Value",n.stdvValues),i+=writeStringMetadataEntryToHtml("Object ID Field",n.objectIdField),i+=writeFieldsListMetadataEntryToHtml("Fields",n.fields),i+=writeCommaSeparatedListMetadataEntryToHtml("Capabilities",n.capabilities),i+=writeStringMetadataEntryToHtml("Default Mosaic Method",n.defaultMosaicMethod),i+=writeCommaSeparatedListMetadataEntryToHtml("Allowed Mosaic Methods",n.allowedMosaicMethods),i+=writeStringMetadataEntryToHtml("Sort Field",n.sortField),i+=writeStringMetadataEntryToHtml("Sort Value",n.sortValue),i+=writeStringMetadataEntryToHtml("Mosaic Operator",n.mosaicOperator),i+=writeNumberMetadataEntryToHtml("Default Compression Quality",n.defaultCompressionQuality),i+=writeStringMetadataEntryToHtml("Default Resampling Method",n.defaultResamplingMethod),i+=writeNumberMetadataEntryToHtml("Maximum Image Height",n.maxImageHeight),i+=writeNumberMetadataEntryToHtml("Maximum Image Width",n.maxImageWidth),i+=writeNumberMetadataEntryToHtml("Maximum Record Count",n.maxRecordCount),i+=writeNumberMetadataEntryToHtml("Maximum Download Image Count",n.maxDownloadImageCount),i+=writeNumberMetadataEntryToHtml("Maximum Download Size Limit",n.maxDownloadSizeLimit),i+=writeNumberMetadataEntryToHtml("Maximum Mosaic Image Count",n.maxMosaicImageCount),i+=writeBooleanMetadataEntryToHtml("Allow Raster Function",n.allowRasterFunction),i+=writeRasterFunctionInfosObjectMetadataEntryToHtml("Raster Function Infos",n.rasterFunctionInfos),i+=writeRasterTypeInfosObjectMetadataEntryToHtml("Raster Type Infos",n.rasterTypeInfos),i+=writeStringMetadataEntryToHtml("Mensuration Capabilities",n.mensurationCapabilities),i+=writeBooleanMetadataEntryToHtml("Has Histograms",n.hasHistograms),i+=writeBooleanMetadataEntryToHtml("Has Colormap",n.hasColormap),i+=writeBooleanMetadataEntryToHtml("Has Raster Attribute Table",n.hasRasterAttributeTable),i+=writeNumberMetadataEntryToHtml("Minimum Scale",n.minScale),i+=writeNumberMetadataEntryToHtml("Maximum Scale",n.maxScale),i+=writeStringMetadataEntryToHtml("Edit Fields Info",n.editFieldsInfo),i+=writeStringMetadataEntryToHtml("Ownership Based Access Control for Rasters",n.ownershipBasedAccessControlForRasters),i+=writeSpatialReferenceObjectMetadataEntryToHtml("Spatial Reference",n.spatialReference),$("#"+t).append(i)}function listFeatureServerServiceInfo(n,t){var i="";i+=writeBooleanMetadataEntryToHtml("Has Version Data",n.hasVersionedData),i+=writeBooleanMetadataEntryToHtml("Supports Disconnected Editing",n.supportsDisconnectedEditing),i+=writeCommaSeparatedListMetadataEntryToHtml("Supported Query Formats",n.supportedQueryFormats),i+=writeNumberMetadataEntryToHtml("Maximum Record Count",n.maxRecordCount),i+=writeCommaSeparatedListMetadataEntryToHtml("Capabilities",n.capabilities),i+=writeStringMetadataEntryToHtml("Description",n.description),i+=writeStringMetadataEntryToHtml("Copyright Text",n.copyrightText),i+=writeSpatialReferenceObjectMetadataEntryToHtml("Spatial Reference",n.spatialReference),i+=writeExtentObjectMetadataEntryToHtml("Initial Extent",n.initialExtent),i+=writeExtentObjectMetadataEntryToHtml("Full Extent",n.fullExtent),i+=writeBooleanMetadataEntryToHtml("Allow Geometry Updates",n.allowGeometryUpdates),i+=writeUnitsObjectMetadataEntryToHtml("Units",n.units),i+=writeDocumentInfoObjectMetadataEntryToHtml("Document Info",n.documentInfo),i+=writeLayersObjectMetadataEntryToHtml("Layers",n.layers),i+=writeTablesObjectMetadataEntryToHtml("Tables",n.tables),i+=writeBooleanMetadataEntryToHtml("Enable ZDefaults",n.enableZDefaults),$("#"+t).append(i)}function listNAServerServiceInfo(n,t){var i="";i+=writeStringMetadataEntryToHtml("Route Layers",n.routeLayers),i+=writeStringMetadataEntryToHtml("Service Area Layers",n.serviceAreaLayers),i+=writeStringMetadataEntryToHtml("Closest Facility Layers",n.closestFacilityLayers),$("#"+t).append(i)}function writeStringValueOrEmptyAlt(n,t){return t=t||"Not specified",n?n!==""?n:t:t}function writeStringMetadataEntryToHtml(n,t){return"<p><b>"+n+":<\/b> "+writeStringValueOrEmptyAlt(t)+"<\/p>"}function writeNumberMetadataEntryToHtml(n,t){return"<p><b>"+n+":<\/b> "+(t?t:"Not specified")+"<\/p>"}function writeBooleanMetadataEntryToHtml(n,t){return"<p>"+(t?'<img src="images/GreenCheckMark.png" alt="True" />':'<img src="images/RedXMark.png" alt="False" />')+"<b>   "+n+"<\/b><\/p>"}function writeCommaSeparatedListMetadataEntryToHtml(n,t){var r,i;if(t){if(r=t.split(","),r.length===0)return"<p><b>"+n+":<\/b> Not specified<\/p>";i="<p><b>"+n+":<\/b> <ul>";function t(n){i+="<li>"+n+"<\/li>"}return r.forEach(t),i+="<\/ul><\/p>"}return"<p><b>"+n+":<\/b> Not specified<\/p>"}function writeSpatialReferenceObjectMetadataEntryToHtml(n,t){var i="<p><b>"+n+":<\/b><br/> ";return i+(t?t.wkid+" ("+t.latestWkid+")<br /><\/p>":"N/A <\/p>")}function writeExtentObjectMetadataEntryToHtml(n,t){var i="<p><b>"+n+":<\/b><br/> ";return t?(i+="XMin: "+t.xmin+"<br />",i+="YMin: "+t.ymin+"<br />",i+="XMax: "+t.xmax+"<br />",i+="YMax: "+t.ymax+"<br />",i+="Spatial Reference: "+t.spatialReference.wkid+" ("+t.spatialReference.latestWkid+")<br />"):i+="N/A",i+"<\/p>"}function writeGeometryObjectMetadataEntryToHtml(n,t){return"<p><b>"+n+":<\/b> "+(t?t:"Not specified")+"<\/p>"}function writeLayersObjectMetadataEntryToHtml(n,t){var i="<p><b>"+n+":<\/b><br /> ";if(t)if(t.length===0)i+=" N/A <\/p>";else{i+='<table class="table table-hover"><thead><tr><th>ID<\/th><th>Name<\/th><th>Parent Layer ID<\/th><th>Default Visibility<\/th><th>Sub Layer Ids<\/th><th>Min Scale<\/th><th>Max Scale<\/th><\/tr><\/thead> <tbody>';function n(n){var t="<tr><td>"+n.id+"<\/td>";t+="<td><b>"+n.name+"<\/b><\/td>",t+="<td>"+(n.parentLayerId?n.parentLayerId:"N/A")+"<\/td>",t+="<td>"+(n.defaultVisibility?'<img src="images/GreenCheckMark.png" alt="Visible by default" />':'<img src="images/RedXMark.png" alt="Hidden by default" />')+"<\/td>",t+="<td>"+(n.subLayerIds?n.subLayerIds:"N/A")+"<\/td>",t+="<td>"+(n.minScale?n.minScale:"N/A")+"<\/td>",t+="<td>"+(n.maxScale?n.maxScale:"N/A")+"<\/td>",t+="<\/tr>",i+=t}t.forEach(n),i+="<\/tbody>",i+="<\/table><\/p>"}else i+=" N/A <\/p>";return i}function writeTablesObjectMetadataEntryToHtml(n,t){var i="<p><b>"+n+":<\/b><br /> ";if(t)if(t.length===0)i+=" N/A <\/p>";else{i+='<table class="table table-hover"><thead><tr><th>ID<\/th><th>Name<\/th><\/tr><\/thead> <tbody>';function n(n){var t="<tr><td><b>"+n.id+"<\/b><\/td>";t+="<td>"+n.name+"<\/td>",t+="<\/tr>",i+=t}t.forEach(n),i+="<\/tbody>",i+="<\/table><\/p>"}else i+=" N/A <\/p>";return i}function writeDocumentInfoObjectMetadataEntryToHtml(n,t){var i="<p><b>"+n+":<\/b><br/> ";return t?(i+="Title: <i>"+writeStringValueOrEmptyAlt(t.Title)+"<\/i><br />",i+="Author: <i>"+writeStringValueOrEmptyAlt(t.Author)+"<\/i><br />",i+="Comments: <i>"+writeStringValueOrEmptyAlt(t.Comments)+"<\/i><br />",i+="Subject: <i>"+writeStringValueOrEmptyAlt(t.Subject)+"<\/i><br />",i+="Category: <i>"+writeStringValueOrEmptyAlt(t.Category)+"<\/i><br />",i+="Keywords: <i>"+writeStringValueOrEmptyAlt(t.Keywords)+"<\/i><br />",i+="Antialiasing Mode: <i>"+writeStringValueOrEmptyAlt(t.AntialiasingMode)+"<\/i><br />",i+="Text Antialiasing Mode: <i>"+writeStringValueOrEmptyAlt(t.TextAntialiasingMode)+"<\/i><br />"):i+=" N/A",i+"<\/p>"}function writeServiceDataTypeObjectMetadataEntryToHtml(n,t){return"<p><b>"+n+":<\/b> "+(t?t:"Not specified")+"<\/p>"}function writeUnitsObjectMetadataEntryToHtml(n,t){return t?"<p><b>"+n+":<\/b> "+t.substring(4)+"<\/p>":"<p><b>"+n+":<\/b> N/A<\/p>"}function writeRasterTypeInfosObjectMetadataEntryToHtml(n,t){return"<p><b>"+n+":<\/b> "+(t?t:"Not specified")+"<\/p>"}function writeRasterFunctionInfosObjectMetadataEntryToHtml(n,t){return"<p><b>"+n+":<\/b> "+(t?t:"Not specified")+"<\/p>"}function writeFieldsListMetadataEntryToHtml(n,t){var i="<p><b>"+n+":<\/b><br /> ";if(t){i+='<table class="table table-hover"><thead><tr><th>Name<\/th><th>Alias<\/th><th>Type<\/th><th>Domain<\/th><\/tr><\/thead> <tbody>';function n(n){var t="<tr><td><b>"+n.name+"<\/b><\/td>";t+="<td>"+n.alias+"<\/td>",t+="<td>"+n.type.substring(13)+"<\/td>",t+=n.domain?"<td>"+n.domain.name+" ("+n.domain.type+")<\/td>":"<td>N/A<\/td>",t+="<\/tr>",i+=t}t.forEach(n),i+="<\/tbody>",i+="<\/table><\/p>"}else i+=" N/A <\/p>";return i}function setServerUrl(n){$("#txtServerUrl").val(n),btnGetServerInfo_Click(n)}var isDebug=!0;$(function(){$("body").on("nodeselect.tree.data-api","[role=leaf]",function(n){if(isDebug){var t="<p>Node Type: leaf<br>Value: "+(n.node.value?n.node.value:n.node.el.text())+"<br>Service Type: "+n.node.servicetype+"<br>Service URL: <a href='"+n.node.serviceurl+"' target='_blank'>"+n.node.serviceurl+"<\/a><br/>Parentage: "+n.node.parentage.join("/")+"<\/p>";$("div#reporter").prepend(t),$("div#reporter").prepend("<span class='label label-info'>Node <b>nodeselect<\/b> event fired:<br><\/span>")}listServiceInfo(n.node.serviceurl,n.node.servicename,n.node.servicetype,"infoPanel")});$("body").on("nodeselect.tree.data-api","[role=branch]",function(n){if(isDebug){var t="<p>Node Type: branch<br>Value: "+(n.node.value?n.node.value:n.node.el.text())+"<br>Service URL: <a href='"+n.node.metadataserviceurl+"' target='_blank'>"+n.node.metadataserviceurl+"<\/a><br/>Parentage: "+n.node.parentage.join("/")+"<\/p>";$("div#reporter").prepend(t),$("div#reporter").prepend("<span class='label label-info'>Node <b>nodeselect<\/b> event fired:<br><\/span>")}listFolderContent(n.node.metadataserviceurl,n.node.value+"_childNodes","infoPanel")});$("body").on("openbranch.tree","[data-toggle=branch]",function(n){if(isDebug){var t="<p>Node Type: branch<br>Value: "+(n.node.value?n.node.value:n.node.el.text())+"<br>Parentage: "+n.node.parentage.join("/")+"<\/p>";$("div#reporter").prepend(t),$("div#reporter").prepend("<span class='label label-info'>Node <b>openbranch<\/b> event fired:<br><\/span>")}});$("body").on("closebranch.tree","[data-toggle=branch]",function(n){if(isDebug){var t="<p>Node Type: branch<br>Value: "+(n.node.value?n.node.value:n.node.el.text())+"<br>Parentage: "+n.node.parentage.join("/")+"<\/p>";$("div#reporter").prepend(t),$("div#reporter").prepend("<span class='label label-info'>Node <b>closebranch<\/b> event fired:<br><\/span>")}})}),String.prototype.endsWith=function(n){return this.indexOf(n,this.length-n.length)!==-1};
//@ sourceMappingURL=shepherd.min.js.map